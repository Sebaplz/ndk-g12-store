<p-dialog
  header="Add Product"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '30rem' }">
  <span class="p-text-secondary block mb-5">Fill in the product details.</span>
  <form [formGroup]="productForm" class="flex flex-column gap-4">
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
        <input
          pInputText
          id="name"
          class="w-full"
          formControlName="name"
        >
        <label for="name" class="font-semibold w-6rem">Name</label>
      </p-floatLabel>
      @if (productForm.controls['name'].errors?.['required'] && productForm.controls['name'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Name is required</small>
      } @else if (productForm.controls['name'].errors?.['minlength'] && productForm.controls['name'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Name must be at least 3 characters long</small>
      } @else if (productForm.controls['name'].errors?.['maxlength'] && productForm.controls['name'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Name cannot exceed 50 characters</small>
      }
    </div>
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
      <input
        pInputText
        id="price"
        class="w-full"
        formControlName="price"
        type="number">
        <label for="price" class="font-semibold w-6rem">Price</label>
      </p-floatLabel>
      @if (productForm.controls['price'].errors?.['required'] && productForm.controls['price'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Price is required</small>
      } @else if (productForm.controls['price'].errors?.['min'] && productForm.controls['price'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Price must be greater than 0</small>
      } @else if (productForm.controls['price'].errors?.['max'] && productForm.controls['price'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Price cannot exceed 10.000.000 CLP</small>
      }
    </div>
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
      <input
        pInputText
        id="stock"
        class="w-full"
        formControlName="stock"
        type="number">
        <label for="stock" class="font-semibold w-6rem">Stock</label>
      </p-floatLabel>
      @if (productForm.controls['stock'].errors?.['required'] && productForm.controls['stock'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Stock is required</small>
      } @else if (productForm.controls['stock'].errors?.['min'] && productForm.controls['stock'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Stock must be greater than 0</small>
      } @else if (productForm.controls['stock'].errors?.['max'] && productForm.controls['stock'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Stock cannot exceed 100</small>
      }
    </div>
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
      <input
        pInputText
        id="category"
        class="w-full"
        formControlName="category">
        <label for="category" class="font-semibold w-6rem">Category</label>
      </p-floatLabel>
      @if (productForm.controls['category'].errors?.['required'] && productForm.controls['category'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Category is required</small>
      } @else if (productForm.controls['category'].errors?.['minlength'] && productForm.controls['category'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Category must be at least 3 characters long</small>
      } @else if (productForm.controls['category'].errors?.['maxlength'] && productForm.controls['category'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Category cannot exceed 50 characters</small>
      }
    </div>
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
      <input
        pInputText
        id="image"
        class="w-full"
        formControlName="image">
        <label for="image" class="font-semibold w-6rem">Image URL</label>
      </p-floatLabel>
      @if (productForm.controls['image'].errors?.['required'] && productForm.controls['image'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Image URL is required</small>
      }
    </div>
    <div class="w-full flex flex-column mb-2">
      <p-floatLabel>
      <textarea
        pInputTextarea
        id="description"
        class="w-full"
        formControlName="description">
      </textarea>
        <label for="description" class="font-semibold w-6rem">Description</label>
      </p-floatLabel>
      @if (productForm.controls['description'].errors?.['minlength'] && productForm.controls['description'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Description must be at least 3 characters long</small>
      } @else if (productForm.controls['description'].errors?.['maxlength'] && productForm.controls['description'].dirty) {
        <small class="text-red-700 ml-3 mt-1">Description cannot exceed 500 characters</small>
      }
    </div>
  </form>
  <ng-template pTemplate="footer">
    <p-button label="Cancel" [text]="true" severity="secondary" (onClick)="onClose.emit()"></p-button>
    <p-button
      label="Save"
      [outlined]="true"
      severity="primary"
      (onClick)="saveProduct()"
      [disabled]="productForm.invalid"></p-button>
  </ng-template>
</p-dialog>
